{%extends 'main/base_login.html'%}
{%block title%}Login{%endblock%}

{%block content%}
<form class="form-signin" action="" method="post">
	{%csrf_token%}
	Hey! <a href='{%url "social:begin" "google-oauth2"%}' id="google-login" class="btn btn-sm btn-danger"><i class="fa fa-google-plus"></i> Login with Google</a>
	<h2 class="form-signin-heading">Please login</h2>
	<input type="text" class="input-block-level form-control" placeholder="Username" style="background-image: none; background-position: 0% 0%; background-repeat: repeat repeat;" name="uname" id="uname">
	<input type="password" class="input-block-level form-control" placeholder="Password" name="pword" id="pword">
	<button class="btn btn-large btn-primary" type="submit">Login</button><br>
	<a href="{%url 'reset_password'%}">Forgot password?</a><br>
	<a href="{%url 'main:signup'%}">Signup</a>
</form>
{%endblock%}

{%block script%}
<script>
	var QueryString = function () {
	  // This function is anonymous, is executed immediately and 
	  // the return value is assigned to QueryString!
	  var query_string = {};
	  var query = window.location.search.substring(1);
	  var vars = query.split("&");
	  for (var i=0;i<vars.length;i++) {
	    var pair = vars[i].split("=");
	    	// If first entry with this name
	    if (typeof query_string[pair[0]] === "undefined") {
	      query_string[pair[0]] = pair[1];
	    	// If second entry with this name
	    } else if (typeof query_string[pair[0]] === "string") {
	      var arr = [ query_string[pair[0]], pair[1] ];
	      query_string[pair[0]] = arr;
	    	// If third or later entry with this name
	    } else {
	      query_string[pair[0]].push(pair[1]);
	    }
	  } 
	    return query_string;
	} ();

	$('#google-login').attr('href', $('#google-login').attr('href') + '?next=' + QueryString.next);
</script>
{%endblock%}
